<section class="cron-editor-main">
  <mat-tab-group class="cron-editor-container" (selectedTabChange)="onTabChange($event)" [backgroundColor]="backgroundColor" [color]="color">

    <!-- Minute -->
    <mat-tab [formGroup]="allForm" class="cron-editor-tab" i18n-label="@@minutelyLabel" label="Ежеминутно" *ngIf="!options.hideMinutesTab" #minutesTab>
      <div class="cron-editor-tab-content" (click)="allForm.controls.cronType.setValue('minutely')">

        <div>
          <span class="cron-form-label" i18n="@@eachFemaleLabel">Каждую</span>
          <mat-form-field>
            <mat-label i18n="@@minuteLabel">Минута</mat-label>
            <mat-select formControlName="minutesPer">
              <mat-option *ngFor="let minute of minutes" [value]="minute">{{minute}}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div *ngIf="isCronFlavorQuartz">
          <span class="cron-form-label" i18n="@@atPrep">В</span>
          <cron-time-picker
            [formGroup]="allForm"
            [hideHours] = true
            [hideMinutes] = true
            [use24HourTime]="options.use24HourTime"
            [hideSeconds]="options.hideSeconds || !isCronFlavorQuartz">
          </cron-time-picker>
        </div>

      </div>
    </mat-tab>

    <!-- Hourly -->
    <mat-tab  class="cron-editor-tab" i18n-label="@@hourlyLabel" label="Ежечасно" *ngIf="!options.hideHourlyTab" #hourlyTab>
      <div class="cron-editor-tab-content" (click)="allForm.controls.cronType.setValue('hourly')">
        <div>
          <span class="cron-form-label" i18n="@@eachMaleLabel">Каждый</span>
          <mat-form-field [formGroup]="allForm">
            <mat-label i18n="@@hourLabel">Час</mat-label>
            <mat-select formControlName="hoursPer">
              <mat-option *ngFor="let hour of hours" [value]="hour">{{hour}}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div>
          <span class="cron-form-label" i18n="@@atPrep">В</span>
          <cron-time-picker
              [formGroup]="allForm"
              [hideHours] = true
              [use24HourTime]="options.use24HourTime"
              [hideSeconds]="options.hideSeconds || !isCronFlavorQuartz">
          </cron-time-picker>
        </div>
      </div>
    </mat-tab>

    <!-- Daily-->
    <mat-tab  class="cron-editor-tab" i18n-label="@@dailyLabel" label="Ежедневно" *ngIf="!options.hideDailyTab" #dailyTab>
      <div class="cron-editor-tab-content" (click)="allForm.controls.cronType.setValue('daily')">

        <div [formGroup]="allForm">
          <span class="cron-form-label" i18n="@@eachMaleLabel">Каждый</span>
            <mat-radio-group class="cron-editor-radio-group" formControlName="weekdaysOnly" >
              <mat-radio-button name="subTab" class="cron-editor-radio-button" [value]="false"  [checked]="true" >
                <mat-form-field>
                  <mat-label i18n="@@dayLabel">День</mat-label>
                  <mat-select formControlName="daysPer">
                    <mat-option *ngFor="let monthDay of selectOptions.monthDays" [value]="monthDay">
                      {{monthDay}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </mat-radio-button>
              <mat-radio-button name="subTab" class="cron-editor-radio-button" [value]="true">
                <span class="cron-form-label" i18n="@@eachWorkingDayLabel">Каждый рабочий день</span>
              </mat-radio-button>
            </mat-radio-group>
        </div>

        <div>
          <span class="cron-form-label" i18n="@@atPrep">В</span>
          <cron-time-picker
            [formGroup]="allForm"
            [use24HourTime]="options.use24HourTime"
            [hideSeconds]="options.hideSeconds || !isCronFlavorQuartz">
          </cron-time-picker>
        </div>
      </div>

    </mat-tab>

    <!-- Weekly-->
    <mat-tab  class="cron-editor-tab" i18n-label="@@weeklyLabel" label="Еженедельно" *ngIf="!options.hideWeeklyTab" #weeklyTab >
      <div class="cron-editor-tab-content" (click)="allForm.controls.cronType.setValue('weekly')">

        <div>
          <span class="cron-form-label" i18n="@@eachMaleLabel">Каждый</span>

          <div [formGroup]="allForm" class="cron-form-week-days">
            <mat-checkbox class="checkbox-margin" formControlName="MON" i18n="@@mondayLabel">Понедельник</mat-checkbox>
            <mat-checkbox class="checkbox-margin" formControlName="TUE" i18n="@@tuesdayLabel">Вторник</mat-checkbox>
            <mat-checkbox class="checkbox-margin" formControlName="WED" i18n="@@wednesdayLabel">Среда</mat-checkbox>
            <mat-checkbox class="checkbox-margin" formControlName="THU" i18n="@@thursdayLabel">Четверг</mat-checkbox>
            <mat-checkbox class="checkbox-margin" formControlName="FRI" i18n="@@fridayLabel">Пятница</mat-checkbox>
            <mat-checkbox class="checkbox-margin" formControlName="SAT" i18n="@@saturdayLabel">Суббота</mat-checkbox>
            <mat-checkbox class="checkbox-margin" formControlName="SUN" i18n="@@sundayLabel">Воскресенье</mat-checkbox>
          </div>
        </div>

        <div>
          <span class="cron-form-label" i18n="@@atPrepCapital">В</span>
          <cron-time-picker [formGroup]="allForm"
                            [use24HourTime]="options.use24HourTime"
                            [hideSeconds]="options.hideSeconds|| !isCronFlavorQuartz">
          </cron-time-picker>
        </div>
      </div>
    </mat-tab>

    <!-- Monthly-->
    <mat-tab class="cron-editor-tab" i18n-label="@@monthlyLabel" label="Ежемесячно" *ngIf="!options.hideMonthlyTab" #monthlyTab>
      <div class="cron-editor-tab-content" [formGroup]="allForm" (click)="allForm.controls.cronType.setValue('monthly')">

        <mat-radio-group class="cron-editor-radio-group" formControlName="specificWeekDay">
          <mat-radio-button name="monthly-radio" class="cron-editor-radio-button" [value]="false" [ngClass]="options.formRadioClass">
            <!-- Specific day -->

            <span class="cron-form-label" i18n="@@onPrepCapital">В</span>

              <ng-container *ngIf="options.cronFlavor === 'quartz'">
                <mat-form-field>
                  <mat-label i18n="@@dayLabel">День</mat-label>
                  <mat-select class="month-days" formControlName="days">
                    <mat-option *ngFor="let monthDaysWithLast of selectOptions.monthDaysWithLasts" [value]="monthDaysWithLast">
                      {{monthDayDisplay(monthDaysWithLast)}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </ng-container>

              <ng-container *ngIf="options.cronFlavor === 'standard'">
                <mat-form-field>
                  <mat-label i18n="@@dayLabel">День</mat-label>
                  <mat-select class="month-days" formControlName="days">
                    <mat-option *ngFor="let monthDaysWithOutLast of selectOptions.monthDaysWithOutLasts" [value]="monthDaysWithOutLast">
                      {{monthDayDisplay(monthDaysWithOutLast)}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </ng-container>

            <span class="cron-form-field-joiner" i18n="@@ofEveryLabel">каждого</span>

                <mat-form-field>
                  <mat-label i18n="@@monthLabel">Месяц</mat-label>
                  <mat-select class="months-small" formControlName="monthsInc" [ngClass]="options.formSelectClass">
                    <mat-option *ngFor="let month of selectOptions.months" [value]="month">
                      {{month}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>

          </mat-radio-button>

          <mat-radio-button name="monthly-radio" class="cron-editor-radio-button"  [value]="true" [ngClass]="options.formRadioClass">
            <!-- Specific Week day -->

            <span class="cron-form-label" i18n="@@onPrepCapital">В</span>

              <mat-form-field>
                <mat-label i18n="@@weekLabel">Неделя</mat-label>
                <mat-select class="day-order-in-month" formControlName="monthsWeek" [ngClass]="options.formSelectClass">
                  <mat-option *ngFor="let monthWeek of selectOptions.monthWeeks" [value]="monthWeek">
                    {{monthWeekDisplay(monthWeek)}}
                  </mat-option>
                </mat-select>
              </mat-form-field>

              <mat-form-field>
                <mat-label i18n="@@dayLabel">День</mat-label>
                <mat-select class="week-days" formControlName="day" [ngClass]="options.formSelectClass">
                  <mat-option *ngFor="let day of selectOptions.days" [value]="day">
                    {{dayDisplay(day)}}
                  </mat-option>
                </mat-select>
              </mat-form-field>

            <span class="cron-form-field-joiner" i18n="@@ofEveryLabel">каждого</span>

              <mat-form-field>
                <mat-label i18n="@@monthLabel">Месяц</mat-label>
                <mat-select class="months-small" formControlName="monthsInc">
                  <mat-option *ngFor="let month of selectOptions.months" [value]="month">
                    {{month}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
          </mat-radio-button>
        </mat-radio-group>

        <div>
          <span class="cron-form-label" i18n="@@atPrep">В</span>
          <cron-time-picker [formGroup]="allForm"
                            [use24HourTime]="options.use24HourTime"
                            [hideSeconds]="options.hideSeconds || !isCronFlavorQuartz">
          </cron-time-picker>
        </div>
      </div>
    </mat-tab>

    <!-- Yearly-->
    <mat-tab class="cron-editor-tab" i18n-label="@@yearlyLabel" label="Ежегодно" *ngIf="!options.hideYearlyTab" #yearlyTab>
      <div class="cron-editor-tab-content" [formGroup]="allForm">
        <mat-radio-group class="cron-editor-radio-group" formControlName="specificMonthWeek">
          <mat-radio-button name="yearly-radio" class="cron-editor-radio-button" [value]="false" [ngClass]="options.formRadioClass">

            <span class="cron-form-label" i18n="@@onPrepCapital">В</span>

            <mat-form-field  *ngIf="options.cronFlavor === 'quartz'">
              <mat-label i18n="@@dayLabel">День</mat-label>
              <mat-select class="month-days" formControlName="day">
                <mat-option *ngFor="let monthDaysWithLast of selectOptions.monthDaysWithLasts" [value]="monthDaysWithLast">
                  {{monthDayDisplay(monthDaysWithLast)}}
                </mat-option>
              </mat-select>
            </mat-form-field>

            <mat-form-field *ngIf="options.cronFlavor === 'standard'">
              <mat-label i18n="@@dayLabel">День</mat-label>
              <mat-select class="month-days" formControlName="day" >
                <mat-option *ngFor="let monthDaysWithOutLast of selectOptions.monthDaysWithOutLasts" [value]="monthDaysWithOutLast">
                  {{monthDayDisplay(monthDaysWithOutLast)}}
                </mat-option>
              </mat-select>
            </mat-form-field>

<!--            of-->

            <mat-form-field>
              <mat-label i18n="@@monthLabel">Месяц</mat-label>
              <mat-select class="months" formControlName="months">
                <mat-option *ngFor="let month of selectOptions.months" [value]="month">
                  {{monthDisplay(month)}}
                </mat-option>
              </mat-select>
            </mat-form-field>

          </mat-radio-button>

          <mat-radio-button name="yearly-radio" class="cron-editor-radio-button" value="specificMonthWeek" [ngClass]="options.formRadioClass">

            <span class="cron-form-label" i18n="@@onPrepCapital">В</span>

            <mat-form-field >
              <mat-label i18n="@@weekLabel">Неделя</mat-label>
              <mat-select class="day-order-in-month" formControlName="monthsWeek" >
                <mat-option *ngFor="let monthWeek of selectOptions.monthWeeks" [value]="monthWeek">
                  {{monthWeekDisplay(monthWeek)}}
                </mat-option>
              </mat-select>
            </mat-form-field>

            <mat-form-field>
              <mat-label i18n="@@dayLabel">День</mat-label>
              <mat-select class="week-days"  formControlName="day" >
                <mat-option *ngFor="let day of selectOptions.days" [value]="day">
                  {{dayDisplay(day)}}
                </mat-option>
              </mat-select>
            </mat-form-field>

<!--            of-->

            <mat-form-field>
              <mat-label i18n="@@monthLabel">Месяц</mat-label>
              <mat-select class="months" formControlName="months">
                <mat-option *ngFor="let month of selectOptions.months" [value]="month">
                  {{monthDisplay(month)}}
                </mat-option>
              </mat-select>
            </mat-form-field>

          </mat-radio-button>
        </mat-radio-group>

        <div>
          <span class="cron-form-label" i18n="@@atPrep">В</span>
          <cron-time-picker [disabled]="disabled"
                            [formGroup]="allForm"
                            [use24HourTime]="options.use24HourTime"
                            [hideSeconds]="options.hideSeconds || !isCronFlavorQuartz">
          </cron-time-picker>
        </div>

      </div>
    </mat-tab>

    <!-- Advanced-->
    <mat-tab class="cron-editor-tab" i18n-label="@@expressionLabel" label="Выражение" *ngIf="!options.hideAdvancedTab" #advancedTab>
      <div class="cron-editor-tab-content" [formGroup]="allForm">
        <mat-form-field>
          <mat-label i18n="@@expressionLabel">Выражение</mat-label>
          <input matInput type="text" class="advanced-cron-editor-input" formControlName="expression">
        </mat-form-field>
      </div>
    </mat-tab>



  </mat-tab-group>
</section>
